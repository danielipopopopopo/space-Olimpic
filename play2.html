<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>××©×™××ª ××¨×˜××™×¡ â€“ ×—×“×¨×™ ×‘×¨×™×—×” ×§×•×¡××™×™×</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700;900&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #02050f;
      --accent: #00ffff;
      --accent-glow: #00eaff;
      --gold: #ffd700;
      --success: #00ffcc;
      --danger: #ff2e63;
      --card: rgba(8, 20, 60, 0.6);
      --text: #f0ffff;
    }

    body {
      font-family: 'Rubik', sans-serif;
      background: radial-gradient(circle at 20% 30%, #0a1a40 0%, #000814 70%);
      color: var(--text);
      margin: 0;
      padding: 12px;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      direction: rtl;
      text-align: right;
    }

    body::before, body::after {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: -2;
    }

    body::before {
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="glow"><feGaussianBlur stdDeviation="2.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter><circle cx="50" cy="50" r="2" fill="white" filter="url(%23glow)"/><circle cx="150" cy="200" r="1.5" fill="#a0d8ef" opacity="0.7"/><circle cx="250" cy="80" r="1.8" fill="#ffd700" opacity="0.6"/></svg>') repeat;
      animation: drift 180s linear infinite;
      opacity: 0.7;
    }

    body::after {
      background: radial-gradient(circle at 70% 80%, rgba(100,0,200,0.12) 0%, transparent 60%);
      animation: nebulaPulse 25s ease-in-out infinite alternate;
    }

    @keyframes drift { from { background-position: 0 0; } to { background-position: -600px -600px; } }
    @keyframes nebulaPulse { 0% { opacity: 0.15; transform: scale(1); } 100% { opacity: 0.4; transform: scale(1.3); } }

    #container {
      max-width: 560px;
      margin: 0 auto;
      background: var(--card);
      backdrop-filter: blur(16px);
      border-radius: 28px;
      padding: 32px 24px;
      border: 2px solid rgba(0,255,255,0.25);
      box-shadow: 0 0 80px rgba(0,255,255,0.3), inset 0 0 60px rgba(0,100,200,0.15);
      position: relative;
      overflow: hidden;
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 2.8rem;
      text-align: center;
      margin: 0.2em 0;
      background: linear-gradient(90deg, #00ffff, #ffd700, #ff00aa, #00ffff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 40px rgba(0,255,255,0.8), 0 0 80px rgba(255,215,0,0.5);
      animation: neonFlicker 4s infinite alternate;
    }

    @keyframes neonFlicker { 0%,100% { opacity: 1; text-shadow: 0 0 40px #00ffff, 0 0 80px #ffd700; } 50% { opacity: 0.92; text-shadow: 0 0 20px #00ffff; } }

    h2 { font-size: 1.7rem; text-align: center; color: #b3ffff; margin: 0.6em 0 1.6em; text-shadow: 0 0 15px rgba(179,255,255,0.7); }
    #timer { font-family: 'Orbitron', sans-serif; font-size: 3.2rem; font-weight: 900; text-align: center; color: var(--gold); text-shadow: 0 0 40px #ffd700, 0 0 80px #ffaa00; margin: 0.6em 0 1.6em; letter-spacing: 6px; animation: beat 2s infinite alternate; }
    @keyframes beat { 0% { transform: scale(1); } 100% { transform: scale(1.06); } }

    #roomCode { font-size: 1.7rem; color: var(--gold); text-align: center; margin: 1.6em 0; text-shadow: 0 0 20px #ffd700; }

    #answer {
      width: 100%;
      padding: 20px 24px;
      font-size: 1.5rem;
      background: rgba(0,10,40,0.8);
      border: 3px solid rgba(0,255,255,0.45);
      border-radius: 18px;
      color: #fff;
      transition: all 0.35s ease;
      margin: 16px 0;
      text-align: right;
      box-shadow: inset 0 0 25px rgba(0,0,0,0.6);
    }

    #answer:focus {
      border-color: #00ffff;
      box-shadow: 0 0 0 6px rgba(0,255,255,0.35), inset 0 0 30px rgba(0,255,255,0.2);
      background: rgba(0,20,60,0.95);
    }

    button {
      width: 100%;
      padding: 20px;
      font-size: 1.45rem;
      font-weight: 700;
      background: linear-gradient(45deg, #0066ff, #00ffff, #0066ff);
      background-size: 300% 300%;
      color: white;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      box-shadow: 0 10px 40px rgba(0,120,255,0.6);
      margin: 16px 0 28px;
      animation: bgMove 7s linear infinite;
      position: relative;
      overflow: hidden;
    }

    button::before {
      content: "";
      position: absolute;
      top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.25) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.4s;
    }

    button:hover::before { opacity: 1; }
    button:hover { transform: translateY(-5px); box-shadow: 0 20px 60px rgba(0,200,255,0.8); }

    #nextRoomBtn {
      background: linear-gradient(45deg, #ffaa00, #ffd700, #ffaa00);
      font-size: 1.6rem;
      padding: 24px;
      margin: 40px 0 24px;
      box-shadow: 0 15px 50px rgba(255,170,0,0.7);
    }

    #nextRoomBtn.visible { display: block; animation: popIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

    #msg {
      font-size: 1.6rem;
      font-weight: 700;
      text-align: center;
      min-height: 2.2em;
      margin: 24px 0;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    #msg.show { opacity: 1; transform: translateY(0) scale(1.05); }

    .ok { color: var(--success); text-shadow: 0 0 30px #00ffcc; }
    .bad { color: var(--danger); text-shadow: 0 0 30px #ff2e63; }

    .particles { position: absolute; inset: 0; pointer-events: none; z-index: 10; }

    .particle {
      position: absolute;
      width: 8px; height: 8px;
      background: #fff;
      border-radius: 50%;
      box-shadow: 0 0 15px #fff;
      animation: sparkle 1.5s forwards;
      opacity: 0;
    }

    @keyframes sparkle { 0% { transform: translate(0,0) scale(0); opacity: 1; } 100% { transform: translate(var(--x), var(--y)) scale(0); opacity: 0; } }

    #finalSummary {
      background: rgba(0,30,70,0.8);
      border: 4px solid var(--success);
      border-radius: 24px;
      padding: 32px;
      margin: 32px 0;
      text-align: center;
      display: none;
      animation: popIn 1.2s ease-out;
      box-shadow: 0 0 70px rgba(0,255,204,0.5);
    }

    #adminBtn {
      position: fixed;
      bottom: 30px;
      left: 30px;
      padding: 14px 24px;
      background: rgba(20,40,90,0.85);
      border: 2px solid var(--accent);
      border-radius: 16px;
      color: #e0ffff;
      font-size: 1.1rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
      z-index: 999;
    }

    #adminBtn:hover { transform: scale(1.1); box-shadow: 0 0 30px rgba(0,255,255,0.6); }

    #admin {
      display: none;
      background: rgba(5,15,40,0.95);
      border: 1px solid var(--accent);
      border-radius: 20px;
      padding: 24px;
      margin: 40px 0 120px;
    }

    @keyframes popIn { 0% { transform: scale(0.7) translateY(40px); opacity: 0; } 80% { transform: scale(1.12); opacity: 1; } 100% { transform: scale(1); } }
    @keyframes bgMove { 0% { background-position: 0% 50%; } 100% { background-position: 300% 50%; } }

    /* ××•×“××œ ××“××™×Ÿ */
    #adminModal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    #adminModal .modal-content {
      background: #0f1e3a;
      padding: 30px;
      border-radius: 16px;
      border: 2px solid #00ffff;
      max-width: 380px;
      width: 90%;
      text-align: center;
    }

    #adminModal input {
      width: 100%;
      padding: 14px;
      font-size: 1.2rem;
      background: #0a1325;
      border: 1px solid #00aaaa;
      color: white;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
    }

    #adminModal button {
      padding: 14px 30px;
      font-size: 1.2rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 0 10px;
    }

    #adminModal .confirm { background: #00aaaa; color: white; }
    #adminModal .cancel  { background: #444; color: #ccc; }
  </style>
</head>
<body>

<div id="container">
  <h1>××©×™××ª ××¨×˜××™×¡</h1>
  <h2 id="roomTitle">×—×“×¨ 1 â€“ ×©×™×’×•×¨ ××¨×˜××™×¡</h2>
  <div id="timer">00:00</div>
  <div id="roomCode">×§×•×“ ×”×—×“×¨: ???</div>

  <div id="questionArea">
    <h3 id="qTitle">×—×™×“×” 1</h3>
    <input type="text" id="answer" placeholder="×”×›× ×¡ ×ª×©×•×‘×” ×›××Ÿ..." autocomplete="off" autocorrect="off" autocapitalize="off"/>
    <button onclick="check()">×‘×“×•×§</button>
    <div id="msg"></div>
    <button id="nextRoomBtn" class="visible" onclick="goToNextRoom()">×§×‘×œ ×§×•×“ ×—×“×¨ ×•××¢×‘×¨ ×œ×—×“×¨ ×”×‘× â†’</button>
  </div>

  <div id="finalSummary"></div>
  <div id="admin"></div>
</div>

<div class="particles" id="particles"></div>

<button id="adminBtn" onclick="openAdmin()">××“××™×Ÿ</button>

<!-- ××•×“××œ ××“××™×Ÿ -->
<div id="adminModal">
  <div class="modal-content">
    <h3 style="color:#00ffff; margin-bottom:20px;">×›× ×™×¡×ª ××“××™×Ÿ</h3>
    <input type="password" id="adminPass" placeholder="×¡×™×¡××ª ××¤×¢×™×œ..." autocomplete="off"/>
    <button class="confirm" onclick="checkAdminPass()">××™×©×•×¨</button>
    <button class="cancel" onclick="document.getElementById('adminModal').style.display='none'">×‘×™×˜×•×œ</button>
  </div>
</div>

<script>
const rooms = {
  1: {
    title: "×—×“×¨ 1 â€“ ×”××¨××ª ××¨×˜××™×¡",
    code: "6784",
    questions: [
      {ans: "×”×œ×ª", next: "×—×¤×©×• ×¢×œ ×”×œ×•×—"},
      {ans: "246", next: "××ª×—×ª ×œ×©×•×œ×—×Ÿ ×”××•×¨×”"},
      {ans: "×”×™×¨×— ×”×•× ×©×œ×‘ ×œ××©×™××•×ª ×‘×¢×ª×™×“", next: "×œ×™×“ ×”×—×œ×•×Ÿ"},
      {ans: "22", next: "×¢×œ ××¤×ª ×”×™×¨×—"},
      {ans: "×‘×œ×™ ×”×ª×•×›× ×™×ª ×œ× ×—×•×–×¨×™× ×œ×™×¨×—", next: "×××—×•×¨×™ ×”×“×œ×ª"},
      {ans: "×¡", next: "×‘×¤×™× ×ª ×”×§×¨×™××”"}
    ]
  },
  2: {
    title: "×—×“×¨ 2 â€“  ×§×•×“ ×œ×©×™×’×•×¨",
    code: "6599",
    questions: [
      {ans: "×‘", next: "×¢×œ ×”×©×•×œ×—×Ÿ ×”××¨×›×–×™"},
      {ans: "× ×¡×", next: "×œ×™×“ ×”×¤×—"},
      {ans: "3", next: "×¢×œ ×”×§×™×¨"},
      {ans: "×‘", next: "××ª×—×ª ×œ×—×œ×•×Ÿ"},
      {ans: "× ×›×•×Ÿ", next: "×‘××¨×•×Ÿ"}
    ]
  }
};

let room = 1;
let qIndex = 0;
let startTime = Date.now();
let room1Time = 0;
let intervalId = null;

const els = {
  roomTitle: document.getElementById("roomTitle"),
  roomCode: document.getElementById("roomCode"),
  timer: document.getElementById("timer"),
  qTitle: document.getElementById("qTitle"),
  answer: document.getElementById("answer"),
  msg: document.getElementById("msg"),
  nextRoomBtn: document.getElementById("nextRoomBtn"),
  finalSummary: document.getElementById("finalSummary"),
  admin: document.getElementById("admin"),
  particles: document.getElementById("particles")
};

function formatTime(ms) {
  const t = Math.floor(ms / 1000);
  return `${Math.floor(t/60).toString().padStart(2,'0')}:${(t%60).toString().padStart(2,'0')}`;
}

function updateTimer() {
  els.timer.textContent = formatTime(Date.now() - startTime);
}

function startTimer() {
  if (intervalId) clearInterval(intervalId);
  startTime = Date.now();
  intervalId = setInterval(updateTimer, 1000);
}

function stopTimer() {
  if (intervalId) {
    clearInterval(intervalId);
    intervalId = null;
  }
}

function loadRoom(r) {
  room = r;
  qIndex = 0;
  els.roomTitle.textContent = rooms[r].title;
  els.roomCode.textContent = "×§×•×“ ×”×—×“×¨: ";
  els.nextRoomBtn.classList.remove("visible");
  els.finalSummary.style.display = "none";
  showQuestion();
  els.answer.focus();
  startTimer();
}

function showQuestion() {
  els.qTitle.textContent = "×—×™×“×” " + (qIndex + 1);
  els.answer.value = "";
  els.msg.className = "";
  els.msg.textContent = "";
  els.msg.classList.remove("show");
}

function createParticles() {
  for (let i = 0; i < 30; i++) {
    const p = document.createElement("div");
    p.className = "particle";
    p.style.left = Math.random() * 100 + "%";
    p.style.top = Math.random() * 100 + "%";
    p.style.setProperty("--x", (Math.random() - 0.5) * 300 + "px");
    p.style.setProperty("--y", (Math.random() - 0.5) * 300 + "px");
    p.style.animationDelay = Math.random() * 0.5 + "s";
    els.particles.appendChild(p);
    setTimeout(() => p.remove(), 2000);
  }
}

function check() {
  const v = els.answer.value.trim();
  const q = rooms[room].questions[qIndex];

  if (v === q.ans) {
    els.msg.className = "ok show";
    els.msg.textContent = "âœ” × ×›×•×Ÿ!";
    createParticles();

    if (qIndex < rooms[room].questions.length - 1) {
      els.msg.textContent += "   â†’  " + q.next;
      qIndex++;
      setTimeout(showQuestion, 2000);
    } else {
      els.msg.textContent = "ğŸ‰ ×¡×™×™××ª× ××ª ×”×—×“×¨!";
      els.roomCode.textContent = "×§×•×“ ×”×—×“×¨: " + rooms[room].code;

      const elapsed = Date.now() - startTime;
      if (room === 1) room1Time = elapsed;

      stopTimer();
      els.timer.textContent = `×–××Ÿ ×—×“×¨ ${room}: ${formatTime(elapsed)}`;

      if (room === 1) {
        els.nextRoomBtn.classList.add("visible");
      } else {
        showFinalSummary(room1Time, elapsed);
      }
    }
  } else {
    els.msg.className = "bad show";
    els.msg.textContent = "âŒ ×œ× × ×›×•×Ÿ, × ×¡×• ×©×•×‘";
  }
}

function showFinalSummary(t1, t2) {
  const totalMs = t1 + t2;
  const total = formatTime(totalMs);
  const sec = Math.floor(totalMs / 1000);

  let fb = sec < 600 ? "ğŸš€ ××ª× ××’×“×” ×§×•×¡××™×ª!" :
           sec < 900 ? "×›×œ ×”×›×‘×•×“ â€“ ×–××Ÿ ××¡×˜×¨×•× ××•×˜×™!" :
           sec < 1200 ? "××¦×•×™×Ÿ! ×”××©×™××” ×”×•×©×œ××”" : "×›×œ ×”×›×‘×•×“ ×¢×œ ×”× ×—×™×©×•×ª ×”×—×œ×œ×™×ª!";

  els.finalSummary.innerHTML = `
    <h2>××©×™××ª ××¨×˜××™×¡ ×”×•×©×œ××”! ğŸŒŒ</h2>
    <p>×—×“×¨ 1: ${formatTime(t1)}</p>
    <p>×—×“×¨ 2: ${formatTime(t2)}</p>
    <p><strong>×¡×”"×›: ${total}</strong></p>
    <p style="font-size:1.8rem; margin-top:1.5em;">${fb}</p>
  `;
  els.finalSummary.style.display = "block";
  createParticles();
}

function goToNextRoom() {
  if (room === 1) loadRoom(2);
}

function openAdmin() {
  document.getElementById('adminModal').style.display = 'flex';
  document.getElementById('adminPass').value = '';
  document.getElementById('adminPass').focus();
}

function checkAdminPass() {
  const pass = document.getElementById('adminPass').value.trim();
  if (pass === "RDRartemis2") {
    document.getElementById('adminModal').style.display = 'none';
    els.admin.style.display = 'block';
    buildAdmin();
  } else {
    alert("×¡×™×¡××” ×©×’×•×™×”");
    document.getElementById('adminPass').value = '';
    document.getElementById('adminPass').focus();
  }
}

function buildAdmin() {
  let html = `<h3>×¢×¨×™×›×ª ×—×“×¨ ${room} (${rooms[room].title})</h3>`;
  rooms[room].questions.forEach((q, i) => {
    html += `
      <strong>×—×™×“×” ${i+1}</strong><br>
      ×ª×©×•×‘×”: <input id="a${i}" value="${q.ans}"><br>
      ×”× ×—×™×” ×”×‘××”: <input id="n${i}" value="${q.next}"><hr>
    `;
  });
  html += `
    <strong>×§×•×“ ×”×—×“×¨:</strong><br>
    <input id="code" value="${rooms[room].code}"><br><br>
    <button onclick="save()">×©××•×¨ ×©×™× ×•×™×™×</button>
    <button onclick="document.getElementById('admin').style.display='none'">×¡×’×•×¨</button>
  `;
  els.admin.innerHTML = html;
}

function save() {
  rooms[room].questions.forEach((q, i) => {
    q.ans = document.getElementById("a" + i).value.trim();
    q.next = document.getElementById("n" + i).value.trim();
  });
  rooms[room].code = document.getElementById("code").value.trim();
  alert("×”×©×™× ×•×™×™× × ×©××¨×• âœ“");
  loadRoom(room);
  els.admin.style.display = 'none';
}

// ××ª×—×•×œ - ×ª××™×“ ××ª×—×™×œ ×‘×—×“×¨ 1
window.addEventListener("load", () => {
  room = 1;
  qIndex = 0;
  loadRoom(1);
});

els.answer.addEventListener("keypress", e => {
  if (e.key === "Enter") {
    e.preventDefault();
    check();
  }
});

els.answer.addEventListener("input", () => {
  if (els.msg.textContent) {
    els.msg.textContent = "";
    els.msg.className = "";
  }
});
</script>
</body>
</html>
